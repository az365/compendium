# Аналитика данных
## Аналитические задачи
- особенность аналитическхи задач: нестандартность, некорректность, неполнота, ...
    - remember that a majority of analytical tasks is realy incorrect
    - correct tasks are not an analytical tasks, but statical tasks
    - a majority of your orders by marketers will not only to calculate smth concretly, but they are about to decide: what we can to calculate for to help to resolve applied problems
- типы задач 
    - как это устроено?
    - А или Б?
    - что произошло?
- аналитика в продукте
    - создание продукта - аналитика для продуктовых требований 
        - изучение данных
        - изучение аудитории
        - изучение структуры спроса
        - изучение типовых сценариев
        - разработка KPI и метрик
    - запуск продукта - аналитика запуска/внедрений
        - проведение эксперимента
        - анализ KPI 
        - анализ отклонений реальной аудитории и сценариев от заложенных 
    - поддержка продукта
        - мониторинг 
        - оценка качества
        - расследование проблем
        - исследование живой аудитории
        - новая функциональность => новый виток (создание продукта)
## Аспекты
- источники данных
    - состав работ 
        - поиск источников и получение данных
        - понимание природы источников
        - чистка и формализация данных
    - типы источников
        - внутренняя статистика
        - внешняя публичная статистика
        - целевой сбор
        - закупка
    - параметры источников
        - точность: чему можно верить а чему нет
        - состав: соцдем, география, интересы, активность, ...
        - детальность
        - дискретность, регулярность: каждые 5 минут, день, месяц, квартал
        - полнота: иногда видим нерепрезентативную часть активности
        - перекосы: чем выборка отличается от генеральной совокупности
        - гибкость: например, возможность пересекать множества
        - шумность
        - скорость: ответ за 5 секунд или 3 недели
        - цена
- multivariate analysis
    - cohort analysis
        - Churn/Retention
        - LTV 
        - RFM 
    - segmentation
        - метрики для анализа перекосов сегментов
            - (A-B) / (A+B)
             - аффинити, аффинитивность
    - AB-testig
        - эксперименты в Бинге: http://www.exp-platform.com/Documents/puzzlingOutcomesInControlledExperiments.pdf
        - валидации метрик на эталонных экспериментах 
- презентация результатов
    - говорить на понятном языке
    - отвечать на волнующие вопросы
    - объективная картина (факты)
    - субъективная картина (storytelling) http://www.unece.org/fileadmin/DAM/stats/documents/writing/MDM_Part1_English.pdf
    - визуализация https://github.com/az365/compendium/blob/master/disciplines/datavis.md
    - приятные бонусы
## Workflows and frameworks
- базовая последовательность (может итерироваться)
    - ознакомление, визуализация
    - формирование гипотез, построение моделей
    - прототипирование расчётов
    - интерпретация модели и результатов
- от проблемы до публикации
    - бизнес-проблема
    - синопис / что известно 
    - формулировка гипотез/вопросов/подходов 
    - EDA, поиск сигнала 
    - отчёт 
    - деш/инструмент
    - мониторинг
    - преза 
    - внешнеяя публикация
- Reproducible Research
    - John Hopkins University - Reproducible Research cource https://www.coursera.org/learn/reproducible-research
- Lean analytics 
    - cycle: ideas->build->product->measure->data->learn->ideas->...
    - lean canvas: problem, customer segments, unique value proposition, solution, channels, revenue streams, cost structure, metrics, unfair advantage
    - lean analytics cycle (the cycle of life for analytical startups)
- HADI canvas 
    - HADI-циклы в развитии компании http://artbayard.ru/hadi
    - HADI: 5 лайфхаков для проверки гипотез https://www.iidf.ru/media/articles/lifehacks/hadi-tsikly-5-layfkhakov/
- CRISP-DM
    - этапы согласно wikipedia.org/wiki/CRISP-DM
        - business understanding
        - data understanding
        - data preparation
        - modeling
        - evaluation
        - deployment
    - этапы согласно habr.com/ru/company/ods/blog/430006
        - формулировка задачи
        - методы решения и данные
            - исследуем возможные подходы к её решению и сформулируем требования к данным
            - соберём необходимые данные
        - exploratory research / eda - exploratory data analysis - изучим собранный датасетт
        - feature engineering - извлечём признаки из сырых данных
        - обучим модель
        - model evaluation - сравним полученные результаты, оценим качество полученных решений и при необходимости повторим пункты 2-6
        - deployment to production - упакуем решение в сервис, который можно будет использовать
## Метрики
- классификации метрик 
    - из Lean Analytics http://leananalyticsbook.com/
        - qualitative vs quantitative
        - vanity vs actionable (8 vanity m: hits, pageviews, visits, visitors, followers/likes, time on, emails collected, downloads)
        - exploratory vs reporting metrics (the hidded genius of Donald Rumsfeld)
        - accounting (how close you are to an ideal) vs experimental (help to optimize the product, pricing, market)
        - leading vs lagging
        - correlated vs causal
    - по способу сопоставления
        - мониторинг и KPI 
            - измеримость
            - достижимость
            - объективность
            - понятный физический смысл
            - понятное влияние на цели компании
            - понятно, как влиять на этот kpi
        - приёмочные (АБТ)
            - красить ухудшения (благодаря монтонности прокрасят и улучшения)
            - не красить контроли (АА-тест)
            - чувствительность (красить лучше других)
            - применимость (некоторые метрики не совместимы с некоторыми типами экспериментов)
    - по близости к прикладным целям продукта
        - оффлайн: оценка качества модели (на тест-сетах)
            - оффлайновая метрика строится на модели продукта и пользователя и приближает онлайновую, но считается дешевле и без рисков на живой аудитории
        - онлайн: измеримые пользовательские (на АБТ)
        - абстрактные: счастье пользователя (то, что в идеале хотим померить, но не можем)
    - по назначению
        - безнесовые: оцифровка бизнес-модели 
        - аудиторные: MAU, DAU, Core, Churn/Retention, LT, LTV
            - про ретеншены и LifeTime: http://kxk.ru/matriarhat/v1_693889__.php
            - параметры сессионного LT/LTV: timeout, timebound
        - поведенческие: как пользуются продуктом 
            - сессионные (session-based)
            - секвенциальные (CJM-based)
        - оценочные: что такое счастье (измерения качества продукта)
- хорошие и плохие 
    - хорошая метрика согласно Lean Analytics http://leananalyticsbook.com/
        - comparative
        - understandable
        - ratio or rate (ratios are easier to act on, are inherently comparative, are good for comparing factors)
        - changes the way to behave
- культура работы с метриками
    - верифицируемость
        - всегда ссылаться на источник с подробностями 
        - коммитить отчуждаемый код расчёта метрик 
        - формулировать воспроизводимо 
    - верифицированность 
        - сбиваться с эталонными расчётами 
        - можем объяснить, что и почему видим 
        - можно умножать/делить на показатели из других каноничных источников
    - как визуализировать https://github.com/az365/compendium/blob/master/disciplines/datavis.md
        - рисовать больше одного числа на кртинке
        - всегда указывать полное наименование среза и метрики на картинке (аббревиатуры и жаргонизмы можно)
        - аккуратность и стандартизация форматов определяют скорость и однозначность чтения
        - стандартизированные обозначеня (цвета, штриховки, шрифты)
        - растры по-английски 
    - как анализировать 
        - выписать, что отображено 
        - выпивать, что тут видно (по факту)
        - гипотезы и трактовки
        - выписывать допущения и ограничения 
    - как расследовать 
        - формулировать увиденную аномалию KPI
        - симптомы: локализация до среза, сопутствующие факты со ссылками
        - гипотезы и проверки 
    - как доносить/формулировать 
        - показывать степень уверенности (показывается вводными оборотами)
            - фактическое наблюдение (видим, что)
            - доказанный факт (показано, что)
            - сильная гипотеза (кажется, что)
            - авторитетное утверждение (утверждается, что)
            - собственное мнение (на мой взгляд)
            - слабая гипотеза (может быть)
            - фантазия (а вдруг, вот бы)
        - разделять корреляции и причины-следствия
        - убедиться, что правильно поняли 
        - проследить, как использовано (попросить согласовать решение/публикации)
- разработка системы метрик 
    - иерархия метрик
        - нижележащие метрики либо аппроксимируют, либо детализируют вышележащие
        - аппроксимации всегда неточны и в случае метрик эта погрешность неизмерима
        - всегда остаются белые пятна, которые надо заполянть волей и виженом 
    - от структуры метрик к структуре организации
        - каждый человек/подразделение должны знать, какую метрику они растят, и как она влияет на вешележащие по иерархии
    - техническая подложка: согласованность ключевых данных и показателей + стыкуемость инструментов
        - онтология (бизнес-глоссарий)
            - общие понятия в команде 
            - переиспользуемость и сопоставимость расчётов 
            - техническая реализация и применение 
        - кубы (витрины)
        - сетка vs вертикали
        - велосипеды vs компоненты/микросервисы
        - плоские vs сессионные таблицы 
        - материализации vs библиотеки/вьюхи/апи/api 
- анализ и поддержка метрик
    - качество данных, стоимость поддержки, скорость разработки
        - под каждым KPI должен быть куб, позволяющий распилить его на компоненты
        - KPI-метрика должна быть зрелой, чторбы иметь доверие, быть экшенабельной и интерпретабельной
    - бизнес/продакшен: мониторинг и расследования
        - аномалия как (бес)полезный сигнал
        - точки измерения
        - цепочки для локализации измерений
        - чеклисты
        - WTF-framework
## Требования к дата-аналитикам
- собственно аналитический скилл
    - стремление докопаться до причины явления, понять смысл
    - критическое мышление, способность и стремление оспаривать собственные гипотезы и сомневаться во всём
    - способность видеть или находить все возможные: взаимосвязи, причины, пути
    - умение декомпозировать сложную аналитическую задачу на ряд более простых
    - развитая логика
- математические скиллы https://github.com/az365/compendium/blob/master/disciplines/math.md
    - тервер, матстат
    - линейная алгебра
    - дискретная математика
    - численные методы
- алгоритмы и структуры данных https://github.com/az365/compendium/blob/master/disciplines/algo.md
- визуализация данных https://github.com/az365/compendium/blob/master/disciplines/datavis.md
## Ошибки и заблуждения
- Топ10 ошибок и заблуждений - согласно Monica Rogati, a data scientist at LinkedIn
    - Assuming data is clean.
    - Not normalizing (пример: искали, где больше выездных свадеб, нашли крупные аэропорты)
    - Excluding outliers.
    - Including outliers.
    - Ignoring seasonality.
    - Ignoring size when reporting growth.
    - Data vomit (плохие деши)
    - Metrics that cry wolf (ложные алерты ведут к слепоте)
    - The 'Not Collected Here' syndrome (неприятие внешних данных ведёт к упущению возможностей по обогащению своих)
    - Focusing on noise
- мифы о метриках
    - метрики нужны только для отчётности руководству 
    - посчитать одну правильную цифру проще, чем много цифр 
    - можно принимать все решения только на метриках 
    - твоя работа всегда должна влиять на какую-то метрику 
    - есть ложь, есть наглая ложь, есть статистика 